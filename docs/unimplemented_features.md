# 未実装機能一覧

このドキュメントは、ProcTailプロジェクトで設計されているが、まだ実装されていない機能をまとめています。

## 実装完了済み機能

以下の機能は **2025年6月18日に実装完了** しました：

### ✅ 1.1 removeコマンド - 監視対象の削除
- `RemoveWatchTarget` IPC要求タイプの実装
- `WatchTargetManager.RemoveWatchTargetsByTagAsync()` メソッドの実装
- サーバー側でのRemoveWatchTarget要求処理の実装
- CLIコマンドの完全実装（確認プロンプト、--yes オプション対応）

### ✅ 1.2 listコマンド - 監視対象一覧の詳細表示
- `GetWatchTargets` IPC要求タイプの実装
- `WatchTargetInfo` データ構造の定義
- プロセス情報（PID、プロセス名、実行パス、開始時刻、タグ）の取得実装
- table/json/csv形式での出力機能の実装

### ✅ 1.3 eventsコマンドの--followオプション
- ポーリングベースのリアルタイムイベント監視機能の実装
- Ctrl+Cでの停止処理の実装
- table/json/csv形式でのリアルタイム出力対応

### ✅ 1.4 子プロセス自動追跡機能
- プロセス開始イベント処理での子プロセス自動追加の実装
- 親プロセスと同じタグでの子プロセス監視の実装

### ✅ 1.5 プロセス終了時のクリーンアップ機能
- プロセス終了イベント処理での監視対象自動削除の実装
- 適切なリソースクリーンアップの実装

### ✅ 1.6 包括的なテストスイート
- 統合テスト（RemoveWatchTarget、GetWatchTargets、IPCメッセージング）
- ユニットテスト（WatchTargetManager、PipeClient、Commands）
- IPCメッセージのシリアライゼーションテスト

## 1. 残りの実装対象機能

### 1.1 高度なリアルタイムイベント通知API

**説明**: Named Pipe経由でのトゥルー・ストリーミング（現在はポーリングベース）

**必要な実装**:
- イベントサブスクリプション機能
- Named Pipe経由でのイベントストリーミング
- クライアントの接続状態管理
- イベントフィルタリング（タグ指定）
- 複数クライアント同時接続対応

### 1.2 イベントフィルタリングの完全実装

**現状**: 
- ファイル拡張子フィルタは実装済み
- ファイルパスパターンフィルタは部分的実装

**未実装項目**:
- `ExcludeFilePatterns` の完全実装
- 正規表現パターンマッチング
- 動的フィルタ更新機能
- ユーザー定義フィルタ

### 1.3 永続化機能

**現状**: メモリ内のみでイベントを保持

**未実装項目**:
- イベントデータのファイル/DB永続化
- `EventRetentionDays` 設定の実装
- 古いイベントの自動削除機能
- サービス再起動時のデータ復元

### 1.4 メトリクス機能の拡張

**現状**: 基本的な統計情報のみ

**未実装項目**:
- 詳細なパフォーマンスメトリクス
- イベント処理レート
- メモリ使用量の詳細分析
- メトリクスのエクスポート機能（Prometheus等）

### 1.5 セキュリティ設定の拡張

**設定項目**:
```json
"Security": {
  "AllowAdministratorsOnly": true,
  "AllowCurrentUserOnly": false,
  "RequireAuthentication": true,
  "AllowedUsers": [],
  "DeniedUsers": []
}
```

**未実装項目**:
- `AllowedUsers`/`DeniedUsers` の実装
- ユーザー認証機能
- アクセス制御の詳細設定

## 2. 中優先度機能

### 2.1 複数プロセスの一括監視

**現状**: プロセス名での監視追加は単一プロセスのみ

**必要な実装**:
- 同名の複数プロセスの一括監視
- プロセス選択機能（対話式）
- 複数PIDの一括追加

### 2.2 監視対象の状態管理強化

**現在の実装状況**: プロセス終了時の基本的なクリーンアップは実装済み

**追加で必要な実装**:
- プロセス生存確認機能
- プロセス再起動時の自動再監視
- 監視対象の健全性チェック
- 孤立した監視対象の検出と削除

### 2.3 設定の動的更新

**現状**: サービス再起動が必要

**必要な実装**:
- 設定ファイル変更の監視
- 設定の Hot Reload
- 動的フィルタ更新
- ログレベルの動的変更

## 3. 低優先度機能

### 3.1 大量イベント処理の最適化

**必要な実装**:
- イベントバッチ処理
- メモリプール使用
- 非同期処理の最適化
- バックプレッシャー制御

### 3.2 Named Pipe通信の最適化

**必要な実装**:
- 接続プール機能
- 通信の圧縮
- 大量データ転送の最適化
- タイムアウト設定の詳細化

---

## 更新された優先度

### ✅ 高優先度（実装完了）
1. ~~removeコマンドの実装~~ ✅ **完了**
2. ~~listコマンドの詳細表示~~ ✅ **完了**
3. ~~子プロセス自動追跡~~ ✅ **完了**
4. ~~プロセス終了時のクリーンアップ~~ ✅ **完了**
5. ~~--followオプションの実装~~ ✅ **完了**

### 🔶 現在の高優先度
1. 永続化機能
2. セキュリティ設定の拡張
3. メトリクス機能拡張
4. 高度なリアルタイムイベント通知API
5. イベントフィルタリングの完全実装

### 🔸 中優先度
1. 複数プロセス一括監視
2. 監視対象の状態管理強化
3. 設定の動的更新

### 🔹 低優先度
1. 大量イベント処理の最適化
2. Named Pipe通信の最適化

---

## 実装統計

- **実装完了**: 6機能 ✅
- **高優先度残り**: 5機能 🔶
- **中優先度**: 3機能 🔸  
- **低優先度**: 2機能 🔹
- **総機能数**: 16機能

**進捗率**: 37.5% (6/16)

---

**最終更新日**: 2025-06-18  
**実装完了日**: 2025-06-18 (高優先度6機能)  
**作成者**: Claude Code